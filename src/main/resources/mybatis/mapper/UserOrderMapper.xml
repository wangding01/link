<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cn.linka.business.mapper.UserOrderMapper">

    <select id="queryAllByUserId" resultType="com.cn.linka.business.bean.UserOrderBean">
        select * from member_order where user_id = #{userId}
    </select>
    <insert id="insert" parameterType="com.cn.linka.business.bean.UserOrderBean">
        INSERT INTO `member_order` (
            `order_id`,
            `user_id`,
            `order_status`,
            `member_menu_id`,
            `create_dt`,
            `update_dt`
        )
        VALUES
            (
                #{orderId},
                #{userId},
                #{orderStatus},
                #{memberMenuId},
                #{createDt},
                #{updateDt}
            );

    </insert>
    <update id="updateStatus" parameterType="com.cn.linka.business.bean.UserOrderBean">
        update member_order
        <set>
            <if test="orderStatus != null and orderStatus != ''">order_status = 2,</if>
            <if test="completeDt != null and completeDt != ''">complete_dt = NOW(),</if>
            <if test="endDt != null and endDt != ''">end_dt = #{endDt}</if>
        </set>
        where order_id = #{orderId}
    </update>
</mapper>
